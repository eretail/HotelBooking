<html xmlns:th="http://www.thymeleaf.org">
<head lang="en">
<!-- AIzaSyD7vnkhYbTs1oDx1mbH2QnYYBywOWdVNTM -->	
</head>
<body  th:fragment="content">
		
	<div style="display:none">
		<input type="text" placeholder="8.8.8.8" id="w-input-search" value=""/>
		<span>
			<button id="w-button-search" type="button">Search</button>
		</span>
	</div>

	<script>
		$(document).ready(function() {
	
			$("#w-button-search").click(function() {
				
				$.getJSON(/*[[@{//})]}]]*/ 'getLocationByIpAddress',
				{
					ipAddress : $('#w-input-search').val()
				}, 
				function(data) {
					
					var data = JSON.stringify(data);
					var json = JSON.parse(data);
					
					showMap(json["latitude"],json["longitude"])
					
					$('#lo').val(json["longitude"]);
					$('#la').val(json["latitude"]);
					$("#result").html(data)
					
				.done(function() {
										
				})
				.fail(function() { 
				})
				.complete(function() { 			
				});
				
			});
			
			var map;
			
			function showMap(latitude,longitude) { 
				
				var googleLatandLong = new google.maps.LatLng(latitude,longitude);
			
				var mapOptions = { 
					zoom: 5,
					center: googleLatandLong,
					mapTypeId: google.maps.MapTypeId.ROADMAP 
				};
			
				var mapDiv = document.getElementById("map");
				map = new google.maps.Map(mapDiv, mapOptions);
				
				var title = "Server Location"; 
				addMarker(map, googleLatandLong, title, "");
				
			}
			
			function addMarker(map, latlong, title, content) { 
				
				var markerOptions = {
					position: latlong, 
					map: map,
					title: title, 
					clickable: true
				};
				var marker = new google.maps.Marker(markerOptions); 
			}
		});
		
	    getExternalIP.then(function(ip){ $('#w-input-search').val(ip); $('#w-button-search').click(); });
	</script>
	<br/>
	
     <div class="jumbotron">
          <div class="row text-center">
			<div id="result" style="display:none"></div>
			<div style="width:600px;height:400px" class="pull-left" id="map">
				<div id="map"/>
			</div>

			<div style="width:400px;height:400px" class="pull-right">
				<form th:action="@{/map2business}" method="get" id="chick">
					<input type="hidden" name="lo" value="2" id="lo" />
					<input type="hidden" name="la" value="1" id="la" />
					<div class="form-group">
					  <label for="sel1" class="pull-left">events close to you:</label>
					  <select class="form-control businessTypePullDown" id="sel1">
					    <option value='hotel'>Hotel</option>
					    <option value='hotel'>Shop</option>
					    <option value='hotel'>Restaurant</option>
					    <option value='hotel'>Hospital</option>
					  </select>
					  <select class="form-control distancePullDown" id="sel2">
					    <option value='1'>1 mile</option>
					    <option value='5'>5 mile</option>
					    <option value='10'>10 mile</option>
					    <option value='20'>20 mile</option>
					  </select>
					</div>
				</form>
				
				
	
	<script>
      var map;
      function initMap() {
/*         map = new google.maps.Map(document.getElementById('map2'), {
          center: {lat: -34.397, lng: 150.644},
          zoom: 8
        });
       */
      }
      
      function myMap() {
    	  var myCenter = new google.maps.LatLng(51.508742,-0.120850);
    	  var mapCanvas = document.getElementById("map");
    	  var mapOptions = {center: myCenter, zoom: 5};
    	  var map = new google.maps.Map(mapCanvas, mapOptions);
    	  var marker = new google.maps.Marker({position:myCenter});
    	  marker.setMap(map);
    	}
     </script>

	<div id="content"></div>
    <script>
      function hndlr(response) {
	      
    	 /*  for (var i = 0; i &#60; response.items.length; i++) {
	        var item = response.items[i];
	        // in production code, item.htmlTitle should have the HTML entities escaped.
	        document.getElementById("content").innerHTML += item.htmlTitle;
	      } */
	      
      }
    </script>
    <script src="https://www.googleapis.com/customsearch/v1?key=&#60;span class='apiparam'&#62;AIzaSyD7vnkhYbTs1oDx1mbH2QnYYBywOWdVNTM
    		&#60;/span &#62;&amp;cx=017576662512468239146:omuauf_lfve&amp;q=cars&amp;callback=hndlr">
    </script>
    
<!--
     <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD7vnkhYbTs1oDx1mbH2QnYYBywOWdVNTM&amp;callback=initMap;" async='defer'></script>
     <script src="https://maps.googleapis.com/maps/api/geocode/json?address=1600+Amphitheatre+Parkway,+Mountain+View,+CA
    			&amp;key=AIzaSyD7vnkhYbTs1oDx1mbH2QnYYBywOWdVNTM;" async='defer'></script>
 -->
 					<ul class="nav nav-tabs">
					  <li class="active"><a data-toggle="tab" href="#home">Home</a></li>
					  <li><a data-toggle="tab" href="#menu1">Menu 1</a></li>
					  <li><a data-toggle="tab" href="#menu2">Menu 2</a></li>
					</ul>

					<div class="tab-content">
					  <div id="home" class="tab-pane fade in active">
					    <h3>HOME</h3>
					    <p>Some content.</p>
					  </div>
					  <div id="menu1" class="tab-pane fade">
					    <h3>Menu 1</h3>
					    <p>Some content in menu 1.</p>
					  </div>
					  <div id="menu2" class="tab-pane fade">
					    <h3>Menu 2</h3>
					    <p>Some content in menu 2.</p>
					  </div>
					</div>
				</div>
		</div>
     </div>
    </body>
</html>